import{a as Q}from"./chunk-6UBFDCFW.js";import{a as X}from"./chunk-E6ZAZPZW.js";import"./chunk-7Y7RURYF.js";import{a as Y}from"./chunk-FPHSLIA5.js";import"./chunk-6H5SRDA6.js";import{c as C,e as B,f as U,h as F,j,k as z,l as H,m as J,r as K,t as W}from"./chunk-ICHD4X5G.js";import{a as G}from"./chunk-TCTIQOOR.js";import{L as $,N as L}from"./chunk-6C2OLKOO.js";import{$a as i,$b as T,Ab as R,Bb as x,Ha as r,Qa as d,Ua as u,Xb as k,Yb as y,_b as A,aa as p,ab as P,cb as a,db as l,eb as c,hb as S,ia as b,ib as M,ja as v,jb as h,kb as m,ob as I,pb as E,qb as N,rb as V,sb as f,tb as D,ub as O}from"./chunk-R5GXIUDZ.js";var q=class t{_questionService=p(Q);questionnaires=[];constructor(){this._questionService.getAllQuestionnaires().subscribe(n=>this.questionnaires=n)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=d({type:t,selectors:[["app-question-list"]],decls:1,vars:2,consts:[["btnNewUrl","/question/create","btnEditUrl","/question/edit",3,"title","listArray"]],template:function(e,o){e&1&&c(0,"app-list",0),e&2&&i("title","Perguntas")("listArray",o.questionnaires)},dependencies:[Y],encapsulation:2})};var ne=(t,n)=>({$implicit:t,index:n});function oe(t,n){if(t&1&&(a(0,"th"),f(1),l()),t&2){let e,o=n.$implicit;P("text-align",(e=o.align)!==null&&e!==void 0?e:"center"),r(),O(" ",o.label," ")}}function ie(t,n){if(t&1&&S(0,5),t&2){let e=m().$implicit,o=m(),s=o.$implicit,_=o.index;i("ngTemplateOutlet",e.template)("ngTemplateOutletContext",R(2,ne,s,_))}}function re(t,n){if(t&1&&f(0),t&2){let e=m().$implicit,o=m().$implicit;O(" ",o[e.key]," ")}}function ae(t,n){if(t&1&&(a(0,"td"),u(1,ie,1,5,"ng-container",4)(2,re,1,1,"ng-template",null,0,x),l()),t&2){let e,o=n.$implicit,s=V(3);P("text-align",(e=o.align)!==null&&e!==void 0?e:"center"),r(),i("ngIf",o.template)("ngIfElse",s)}}function le(t,n){if(t&1&&(a(0,"tr"),u(1,ae,4,4,"td",2),l()),t&2){let e=m();r(),i("ngForOf",e.columns)}}var w=class t{data=[];columns=[];static \u0275fac=function(e){return new(e||t)};static \u0275cmp=d({type:t,selectors:[["app-table"]],inputs:{data:"data",columns:"columns"},decls:6,vars:2,consts:[["defaultCell",""],[1,"table"],[3,"text-align",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf","ngIfElse"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,o){e&1&&(a(0,"table",1)(1,"thead")(2,"tr"),u(3,oe,2,3,"th",2),l()(),a(4,"tbody"),u(5,le,2,1,"tr",3),l()()),e&2&&(r(3),i("ngForOf",o.columns),r(2),i("ngForOf",o.data))},dependencies:[T,k,y,A],styles:[".table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:16px;border:1px solid var(--color-outline-variant);border-radius:8px;overflow:hidden}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:var(--color-surface-variant);color:var(--color-text-low)}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;color:var(--color-text-low);border-bottom:1px solid var(--color-outline-variant)}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}"]})};var se=["actionsTemplate"];function me(t,n){if(t&1&&(a(0,"div",9)(1,"h3"),f(2,"Perguntas adicionadas:"),l(),c(3,"app-table",10),l()),t&2){let e=m();r(3),i("data",e.questions)("columns",e.columns)}}function pe(t,n){if(t&1){let e=M();a(0,"app-button",11),h("onClick",function(){let s=b(e).index,_=m();return v(_.removeQuestion(s))}),l()}}var g=class t{_questionService=p(Q);_route=p($);_fb=p(K);_router=p(L);actionsTemplate;columns=[];form=this._fb.group({name:["",C.required]});newQuestionControl=new F("",C.required);newPointsControl=new F(100,[C.required,C.min(0)]);isEditMode=!1;questionnaireId=null;questions=[];constructor(){this._route.paramMap.subscribe(n=>{this.questionnaireId=n.get("id"),this.isEditMode=!!this.questionnaireId,this.questionnaireId&&this._questionService.getQuestionnaireById(this.questionnaireId).subscribe(e=>{e&&(this.form.get("name")?.patchValue(e.name),this.questions=e.questions)})})}ngAfterViewInit(){this.columns=[{label:"Pergunta",key:"text",align:"start"},{label:"Pontos",key:"points"},{label:"A\xE7\xF5es",key:"points",template:this.actionsTemplate,align:"end"}]}addQuestion(){if(this.newQuestionControl.valid&&this.newPointsControl.valid){let n={text:this.newQuestionControl.value??"",points:this.newPointsControl.value??0};this.questions.push(n),this.newQuestionControl.reset(),this.newPointsControl.setValue(100)}}removeQuestion(n){this.questions.splice(n,1)}onSubmit(){if(this.form.invalid)return;let n={name:this.form.value.name??"",questions:this.questions};this.isEditMode&&this.questionnaireId?this._questionService.updateQuestionnaire(this.questionnaireId,n):this._questionService.createQuestionnaire(n),this._router.navigate(["/question"])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=d({type:t,selectors:[["app-question-form"]],viewQuery:function(e,o){if(e&1&&I(se,5),e&2){let s;E(s=N())&&(o.actionsTemplate=s.first)}},decls:12,vars:6,consts:[["actionsTemplate",""],[1,"space-y-4",3,"ngSubmit","formGroup"],["label","Nome do Question\xE1rio","formControlName","name","name","name","placeholder","Digite o nome"],[1,"container"],["label","Pergunta","name","name","placeholder","Digite a Pergunta",3,"formControl"],["label","Pontos","name","name","placeholder","Digite os pontos","type","number","min","0",3,"formControl"],["type","button","label","Adicionar",3,"onClick"],["class","container-list",4,"ngIf"],["type","submit","label","Salvar",3,"disabled"],[1,"container-list"],[3,"data","columns"],["variant","icon","icon","delete",3,"onClick"]],template:function(e,o){if(e&1){let s=M();a(0,"h1"),f(1),l(),a(2,"form",1),h("ngSubmit",function(){return b(s),v(o.onSubmit())}),c(3,"app-input",2),a(4,"div",3),c(5,"app-input",4)(6,"app-input",5),a(7,"app-button",6),h("onClick",function(){return b(s),v(o.addQuestion())}),l()(),u(8,me,4,2,"div",7)(9,pe,1,0,"ng-template",null,0,x),c(11,"app-button",8),l()}e&2&&(r(),D(o.isEditMode?"Editar question\xE1rio":"Criar question\xE1rio"),r(),i("formGroup",o.form),r(3),i("formControl",o.newQuestionControl),r(),i("formControl",o.newPointsControl),r(2),i("ngIf",o.questions.length>0),r(3),i("disabled",o.form.invalid))},dependencies:[W,j,B,U,z,H,J,G,X,w,T,y],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:8px}[_nghost-%COMP%] > h1[_ngcontent-%COMP%]{color:var(--color-text-high)}[_nghost-%COMP%] > form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:16px;border:1px solid var(--color-outline-variant);border-radius:16px}[_nghost-%COMP%]   .container-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--color-text-high)}"]})};var Ne=[{path:"",component:q},{path:"create",component:g},{path:"edit/:id",component:g}];export{Ne as ROUTES};
