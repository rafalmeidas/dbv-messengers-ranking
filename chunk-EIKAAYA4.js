import{a as T,c as A,d as k,e as R,f as S,g as M,i as j,j as V}from"./chunk-MSYKY6KP.js";import{a as B,b as G,d as K,e as $,h as q,i as z,j as H,k as J,l as Q,m as W,n as X,o as Y}from"./chunk-IRP2LSEJ.js";import{a as D}from"./chunk-IRBHFK26.js";import{L as w,N as L,O as P,R as C,c as y,f as u}from"./chunk-IZNJP4OO.js";import{Ha as s,Ra as c,Va as b,W as F,aa as a,ab as l,db as o,eb as r,f as _,fb as p,hb as x,ib as I,mb as m,nb as g,ob as v,qb as O,rb as E}from"./chunk-ZK3GAXJM.js";var et=i=>[i],it=(i,e)=>[i,e];function nt(i,e){if(i&1&&(o(0,"li")(1,"span"),m(2),r(),p(3,"app-button",2),r()),i&2){let t=e.$implicit,n=I();s(2),g(t[n.labelKey]),s(),l("routerLink",E(2,it,n.btnEditUrl,t[n.labelId]))}}var h=class i{title="Title";btnNewLabel="Novo";btnNewUrl="";listArray=[];labelKey="name";labelId="id";btnEditUrl="";static \u0275fac=function(t){return new(t||i)};static \u0275cmp=c({type:i,selectors:[["app-list"]],inputs:{title:"title",btnNewLabel:"btnNewLabel",btnNewUrl:"btnNewUrl",listArray:"listArray",labelKey:"labelKey",labelId:"labelId",btnEditUrl:"btnEditUrl"},decls:7,vars:6,consts:[[3,"routerLink","label"],[4,"ngFor","ngForOf"],["variant","icon","icon","edit",3,"routerLink"]],template:function(t,n){t&1&&(o(0,"div")(1,"h1"),m(2),r(),o(3,"section"),p(4,"app-button",0),r(),o(5,"ul"),b(6,nt,4,5,"li",1),r()()),t&2&&(s(2),v("",n.title,":"),s(2),l("routerLink",O(4,et,n.btnNewUrl))("label",n.btnNewLabel),s(2),l("ngForOf",n.listArray))},dependencies:[u,y,C,P,D],styles:["[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;background:var(--theme-surface);color:var(--color-text-low);padding:16px;border-radius:8px}[_nghost-%COMP%] > div[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}[_nghost-%COMP%] > div[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{width:100%;margin-top:16px;list-style:none;display:flex;padding:16px;border:1px solid var(--color-outline-variant);border-radius:8px}[_nghost-%COMP%] > div[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between}"]})};var d=class i{firestore=a(T);getAllUnits(){let e=S(this.firestore,"units");return A(e,{idField:"id"})}getUnitById(e){let t=M(this.firestore,`units/${e}`);return k(t)}createUnit(e){let t=S(this.firestore,"units");return R(t,e)}updateUnit(e,t){let n=M(this.firestore,`units/${e}`);return j(n,t)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=F({token:i,factory:i.\u0275fac,providedIn:"root"})};var U=class i{_unitService=a(d);units=[];constructor(){this._unitService.getAllUnits().subscribe(e=>this.units=e)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=c({type:i,selectors:[["app-unit-list"]],decls:1,vars:1,consts:[["title","Unidades","btnNewUrl","/unit/create","btnEditUrl","/unit/edit",3,"listArray"]],template:function(t,n){t&1&&p(0,"app-list",0),t&2&&l("listArray",n.units)},dependencies:[u,h],encapsulation:2})};function ot(i,e){if(i&1&&(o(0,"option",5),m(1),r()),i&2){let t=e.$implicit;l("value",t.uid),s(),v(" ",t.name," ")}}var f=class i{fb=a(X);unitService=a(d);userService=a(V);route=a(w);router=a(L);form=this.fb.group({name:["",G.required],counselors:[[]]});isEditMode=!1;unitId=null;counselors=[];constructor(){this.userService.getAllUsers().subscribe(e=>{this.counselors=e}),this.route.paramMap.subscribe(e=>{this.unitId=e.get("id"),this.isEditMode=!!this.unitId,this.unitId&&this.unitService.getUnitById(this.unitId).subscribe(t=>{t&&this.form.patchValue(t)})})}submit(){return _(this,null,function*(){this.form.invalid||(this.isEditMode&&this.unitId?yield this.unitService.updateUnit(this.unitId,this.form.value):yield this.unitService.createUnit(this.form.value),this.router.navigate(["/unit"]))})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=c({type:i,selectors:[["app-unit-form"]],decls:12,vars:3,consts:[[3,"ngSubmit","formGroup"],["formControlName","name"],["formControlName","counselors","multiple",""],[3,"value",4,"ngFor","ngForOf"],["type","submit"],[3,"value"]],template:function(t,n){t&1&&(o(0,"h1"),m(1),r(),o(2,"form",0),x("ngSubmit",function(){return n.submit()}),o(3,"label"),m(4," Name: "),p(5,"input",1),r(),o(6,"label"),m(7," Counselors: "),o(8,"select",2),b(9,ot,2,2,"option",3),r()(),o(10,"button",4),m(11,"Save"),r()()),t&2&&(s(),g(n.isEditMode?"Edit Unit":"Create Unit"),s(),l("formGroup",n.form),s(7),l("ngForOf",n.counselors))},dependencies:[u,y,Y,q,J,W,B,Q,K,$,z,H,C],encapsulation:2})};var Lt=[{path:"",component:U},{path:"create",component:f},{path:"edit/:id",component:f}];export{Lt as UNIT_ROUTES};
