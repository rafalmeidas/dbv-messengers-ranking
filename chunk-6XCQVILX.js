import{a as ce}from"./chunk-CYKGK7N5.js";import{a as ae,b as le,c as ne}from"./chunk-AFRJWWLZ.js";import{a as se}from"./chunk-S4VB254E.js";import{d as j,f as G,g as W,h as q,i as _,j as z,n as H}from"./chunk-WF2A5D66.js";import{b as T,d as h,e as $,h as J,i as Q,k as X,l as Y,m as Z,n as ee,p as re,q as te,r as oe,s as ie}from"./chunk-7NNS4R7G.js";import{a as R}from"./chunk-PXAYXCKN.js";import{L as V,N as B,R as L}from"./chunk-PGADE6W6.js";import{$a as i,Ha as l,Qa as n,Rb as k,Ta as I,Ua as P,Ub as v,W as O,_a as N,aa as a,bb as D,cb as s,db as c,eb as b,f as M,gb as f,hb as w,ka as F,nb as g,ob as E,pb as x,qb as K,rb as A,sb as U}from"./chunk-LWKRYI56.js";var p=class o{firestore=a(j);getAllTrailblazers(){let r=_(this.firestore,"trailblazers");return G(r,{idField:"id"})}getTrailblazerById(r){let t=z(this.firestore,`trailblazers/${r}`);return W(t)}createTrailblazer(r){let t=_(this.firestore,"trailblazers");return q(t,r)}updateTrailblazer(r,t){let e=z(this.firestore,`trailblazers/${r}`);return H(e,t)}static \u0275fac=function(t){return new(t||o)};static \u0275prov=O({token:o,factory:o.\u0275fac,providedIn:"root"})};var C=class o{_trailblazerService=a(p);trailblazers=[];constructor(){this._trailblazerService.getAllTrailblazers().subscribe(r=>this.trailblazers=r)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=n({type:o,selectors:[["app-trailblazer-list"]],decls:1,vars:1,consts:[["title","Desbravadores","btnNewUrl","/trailblazer/create","btnEditUrl","/trailblazer/edit",3,"listArray"]],template:function(t,e){t&1&&b(0,"app-list",0),t&2&&i("listArray",e.trailblazers)},dependencies:[se],encapsulation:2})};function de(o,r){if(o&1&&(s(0,"option",3),g(1),c()),o&2){let t=r.$implicit,e=w();i("value",t[e.valueKey]),l(),x(" ",t[e.labelKey]," ")}}var y=class o extends ae{options=[];labelKey;valueKey;onSelectChange(r){console.log(r);let e=r.target.value;this.value=this.castValue(e),this.onChange(this.value),this.onTouched()}castValue(r){return r}static \u0275fac=(()=>{let r;return function(e){return(r||(r=F(o)))(e||o)}})();static \u0275cmp=n({type:o,selectors:[["app-select"]],inputs:{options:"options",labelKey:"labelKey",valueKey:"valueKey"},features:[I],decls:3,vars:10,consts:[[3,"label","focused","disabled","error"],[3,"ngModelChange","focus","blur","change","disabled","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){t&1&&(s(0,"app-form-group",0)(1,"select",1),U("ngModelChange",function(m){return A(e.value,m)||(e.value=m),m}),f("focus",function(){return e.onFocus()})("blur",function(){return e.onBlur()})("change",function(m){return e.onSelectChange(m)}),P(2,de,2,2,"option",2),c()()),t&2&&(i("label",e.label)("focused",e.focused)("disabled",e.disabled)("error",e.error),l(),D("error",!!e.error),i("disabled",e.disabled),K("ngModel",e.value),N("name",e.name),l(),i("ngForOf",e.options))},dependencies:[v,k,oe,ee,re,Z,h,J,le],styles:["[_nghost-%COMP%]   select[_ngcontent-%COMP%]{padding:.5rem .75rem;border:1px solid var(--color-outline-variant);border-radius:8px;background-color:var(--theme-surface);color:var(--color-text-high);font-size:1rem;transition:border-color .2s,box-shadow .2s;appearance:none}[_nghost-%COMP%]   select[_ngcontent-%COMP%]:hover{border-color:var(--color-outline)}[_nghost-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:var(--color-primary);box-shadow:0 0 0 2px color-mix(in srgb,var(--color-primary),transparent 80%);outline:none}[_nghost-%COMP%]   select[_ngcontent-%COMP%]:active{border-color:var(--color-pressed)}[_nghost-%COMP%]   select[_ngcontent-%COMP%]:disabled{background-color:var(--theme-surface);color:var(--color-text-lowest);border-color:var(--color-outline-variant);cursor:not-allowed}[_nghost-%COMP%]   select.error[_ngcontent-%COMP%]{border-color:var(--color-error)}"]})};var d=class o{_fb=a(te);_trailblazerService=a(p);_unitService=a(ce);_route=a(V);_router=a(B);form=this._fb.group({name:["",T.required],unitId:["",T.required]});isEditMode=!1;trailblazerId=null;units=[];constructor(){this._unitService.getAllUnits().subscribe(r=>this.units=r),this._route.paramMap.subscribe(r=>{this.trailblazerId=r.get("id"),this.isEditMode=!!this.trailblazerId,this.trailblazerId&&this._trailblazerService.getTrailblazerById(this.trailblazerId).subscribe(t=>{t&&this.form.patchValue(t)})})}submit(){return M(this,null,function*(){this.form.invalid||(this.isEditMode&&this.trailblazerId?yield this._trailblazerService.updateTrailblazer(this.trailblazerId,this.form.value):yield this._trailblazerService.createTrailblazer(this.form.value),this._router.navigate(["/trailblazer"]))})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=n({type:o,selectors:[["app-trailblazer-form"]],decls:6,vars:4,consts:[[3,"ngSubmit","formGroup"],["label","Nome","formControlName","name","name","name","placeholder","Nome"],["label","Selecione a unidade","formControlName","unitId","name","unitId","placeholder","Selecione a unidade","labelKey","name","valueKey","id",3,"options"],["type","submit","label","Salvar",3,"disabled"]],template:function(t,e){t&1&&(s(0,"h1"),g(1),c(),s(2,"form",0),f("ngSubmit",function(){return e.submit()}),b(3,"app-input",1)(4,"app-select",2)(5,"app-button",3),c()),t&2&&(l(),E(e.isEditMode?"Editar desbravador":"Criar desbravador"),l(),i("formGroup",e.form),l(2),i("options",e.units),l(),i("disabled",e.form.invalid))},dependencies:[ie,Q,h,$,X,Y,y,ne,v,L,R],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:8px}[_nghost-%COMP%] > h1[_ngcontent-%COMP%]{color:var(--color-text-high)}[_nghost-%COMP%] > form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}"]})};var Le=[{path:"",component:C},{path:"create",component:d},{path:"edit/:id",component:d}];export{Le as ROUTES};
