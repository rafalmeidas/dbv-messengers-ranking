import{a as V}from"./chunk-2RDHF7XI.js";import{a as G}from"./chunk-5E5BFI5K.js";import{c as L}from"./chunk-ARHQRNF2.js";import{a as B}from"./chunk-AQ4F37K2.js";import{g as F,i as N,j as D,k as O,l as f,m as u,q as x}from"./chunk-5HYU2PKZ.js";import{c as z,e as E,f as U,j as P,l as R,m as w,r as A,t as j}from"./chunk-2KAAUVTJ.js";import{a as M}from"./chunk-PXAYXCKN.js";import{L as S,N as _,R as I}from"./chunk-PGADE6W6.js";import{$a as o,Ha as n,Qa as m,Ub as T,W as h,aa as t,cb as b,db as d,eb as p,f as v,gb as g,nb as y,ob as C}from"./chunk-LWKRYI56.js";var l=class i{firestore=t(F);getAllTrailblazers(){let r=f(this.firestore,"trailblazers");return N(r,{idField:"id"})}getTrailblazerById(r){let e=u(this.firestore,`trailblazers/${r}`);return D(e)}createTrailblazer(r){let e=f(this.firestore,"trailblazers");return O(e,r)}updateTrailblazer(r,e){let a=u(this.firestore,`trailblazers/${r}`);return x(a,e)}static \u0275fac=function(e){return new(e||i)};static \u0275prov=h({token:i,factory:i.\u0275fac,providedIn:"root"})};var c=class i{_trailblazerService=t(l);trailblazers=[];constructor(){this._trailblazerService.getAllTrailblazers().subscribe(r=>this.trailblazers=r)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=m({type:i,selectors:[["app-trailblazer-list"]],decls:1,vars:1,consts:[["title","Desbravadores","btnNewUrl","/trailblazer/create","btnEditUrl","/trailblazer/edit",3,"listArray"]],template:function(e,a){e&1&&p(0,"app-list",0),e&2&&o("listArray",a.trailblazers)},dependencies:[B],encapsulation:2})};var s=class i{_fb=t(A);_trailblazerService=t(l);_unitService=t(G);_route=t(S);_router=t(_);form=this._fb.group({name:["",z.required],unitId:["",z.required]});isEditMode=!1;trailblazerId=null;units=[];constructor(){this._unitService.getAllUnits().subscribe(r=>this.units=r),this._route.paramMap.subscribe(r=>{this.trailblazerId=r.get("id"),this.isEditMode=!!this.trailblazerId,this.trailblazerId&&this._trailblazerService.getTrailblazerById(this.trailblazerId).subscribe(e=>{e&&this.form.patchValue(e)})})}submit(){return v(this,null,function*(){this.form.invalid||(this.isEditMode&&this.trailblazerId?yield this._trailblazerService.updateTrailblazer(this.trailblazerId,this.form.value):yield this._trailblazerService.createTrailblazer(this.form.value),this._router.navigate(["/trailblazer"]))})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=m({type:i,selectors:[["app-trailblazer-form"]],decls:6,vars:4,consts:[[3,"ngSubmit","formGroup"],["label","Nome","formControlName","name","name","name","placeholder","Nome"],["label","Selecione a unidade","formControlName","unitId","name","unitId","placeholder","Selecione a unidade","labelKey","name","valueKey","id",3,"options"],["type","submit","label","Salvar",3,"disabled"]],template:function(e,a){e&1&&(b(0,"h1"),y(1),d(),b(2,"form",0),g("ngSubmit",function(){return a.submit()}),p(3,"app-input",1)(4,"app-select",2)(5,"app-button",3),d()),e&2&&(n(),C(a.isEditMode?"Editar desbravador":"Criar desbravador"),n(),o("formGroup",a.form),n(2),o("options",a.units),n(),o("disabled",a.form.invalid))},dependencies:[j,P,E,U,R,w,M,V,L,T,I],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:8px}[_nghost-%COMP%] > h1[_ngcontent-%COMP%]{color:var(--color-text-high)}[_nghost-%COMP%] > form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}"]})};var ue=[{path:"",component:c},{path:"create",component:s},{path:"edit/:id",component:s}];export{ue as ROUTES};
