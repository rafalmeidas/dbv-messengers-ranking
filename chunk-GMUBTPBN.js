import{a as g}from"./chunk-67CCWEU7.js";import{c as A}from"./chunk-AFRJWWLZ.js";import{a as L}from"./chunk-S4VB254E.js";import"./chunk-5HYU2PKZ.js";import{b as u,d as E,e as I,g as q,i as N,j as D,k as T,l as V,q as k,s as R}from"./chunk-7NNS4R7G.js";import{a as O}from"./chunk-PXAYXCKN.js";import{L as w,N as F}from"./chunk-PGADE6W6.js";import{$a as s,Ha as i,Qa as d,Rb as P,Sb as M,Ua as h,Ub as S,aa as l,cb as r,db as a,eb as m,fb as y,gb as f,hb as b,ia as x,ja as Q,nb as p,ob as C}from"./chunk-LWKRYI56.js";var _=class n{_questionService=l(g);questionnaires=[];constructor(){this._questionService.getAllQuestionnaires().subscribe(t=>this.questionnaires=t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=d({type:n,selectors:[["app-question-list"]],decls:1,vars:1,consts:[["title","Perguntas","btnNewUrl","/question/create","btnEditUrl","/question/edit",3,"listArray"]],template:function(e,o){e&1&&m(0,"app-list",0),e&2&&s("listArray",o.questionnaires)},dependencies:[L],encapsulation:2})};function U(n,t){if(n&1){let e=y();r(0,"li")(1,"span"),p(2),a(),r(3,"span"),p(4),a(),r(5,"app-button",10),f("onClick",function(){let v=x(e).index,G=b(2);return Q(G.removeQuestion(v))}),a()()}if(n&2){let e=t.$implicit;i(2),C(e.text),i(2),C(e.points)}}function $(n,t){if(n&1&&(r(0,"div",8)(1,"h3"),p(2,"Perguntas adicionadas:"),a(),r(3,"ul"),h(4,U,6,2,"li",9),a()()),n&2){let e=b();i(4),s("ngForOf",e.questions)}}var c=class n{_fb=l(k);_questionService=l(g);_route=l(w);_router=l(F);form=this._fb.group({name:["",u.required]});newQuestionControl=new q("",u.required);newPointsControl=new q(0,[u.required,u.min(0)]);isEditMode=!1;questionnaireId=null;questions=[];constructor(){this._route.paramMap.subscribe(t=>{this.questionnaireId=t.get("id"),this.isEditMode=!!this.questionnaireId,this.questionnaireId&&this._questionService.getQuestionnaireById(this.questionnaireId).subscribe(e=>{e&&(this.form.get("name")?.patchValue(e.name),this.questions=e.questions)})})}addQuestion(){if(this.newQuestionControl.valid&&this.newPointsControl.valid){let t={text:this.newQuestionControl.value??"",points:this.newPointsControl.value??0};this.questions.push(t),this.newQuestionControl.reset(),this.newPointsControl.setValue(0)}}removeQuestion(t){this.questions.splice(t,1)}onSubmit(){if(this.form.valid){let t={name:this.form.value.name??"",questions:this.questions};this._questionService.createQuestionnaire(t).then(()=>{this.form.reset(),this.questions=[]})}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=d({type:n,selectors:[["app-question-form"]],decls:10,vars:6,consts:[[1,"space-y-4",3,"ngSubmit","formGroup"],["label","Nome do Question\xE1rio","formControlName","name","name","name","placeholder","Digite o nome"],[1,"container"],["label","Pergunta","name","name","placeholder","Digite a Pergunta",3,"formControl"],["label","Pontos","name","name","placeholder","Digite os pontos","type","number","min","0",3,"formControl"],["type","button","label","Adicionar",3,"onClick"],["class","container-list",4,"ngIf"],["type","submit","label","Salvar",3,"disabled"],[1,"container-list"],[4,"ngFor","ngForOf"],["variant","icon","icon","delete",3,"onClick"]],template:function(e,o){e&1&&(r(0,"h1"),p(1),a(),r(2,"form",0),f("ngSubmit",function(){return o.onSubmit()}),m(3,"app-input",1),r(4,"div",2),m(5,"app-input",3)(6,"app-input",4),r(7,"app-button",5),f("onClick",function(){return o.addQuestion()}),a()(),h(8,$,5,1,"div",6),m(9,"app-button",7),a()),e&2&&(i(),C(o.isEditMode?"Editar question\xE1rio":"Criar question\xE1rio"),i(),s("formGroup",o.form),i(3),s("formControl",o.newQuestionControl),i(),s("formControl",o.newPointsControl),i(2),s("ngIf",o.questions.length>0),i(),s("disabled",o.form.invalid))},dependencies:[R,N,E,I,D,T,V,S,P,M,A,O],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:8px}[_nghost-%COMP%] > h1[_ngcontent-%COMP%]{color:var(--color-text-high)}[_nghost-%COMP%] > form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:16px;border:1px solid var(--color-outline-variant);border-radius:16px}[_nghost-%COMP%]   .container-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--color-text-high)}[_nghost-%COMP%]   .container-list[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{width:100%;margin-top:16px;list-style:none;display:flex;padding:16px;border:1px solid var(--color-outline-variant);border-radius:8px}[_nghost-%COMP%]   .container-list[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between;color:var(--color-text-low)}"]})};var pe=[{path:"",component:_},{path:"create",component:c},{path:"edit/:id",component:c}];export{pe as ROUTES};
